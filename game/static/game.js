function csrfToken(){function t(t){var e=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),i=0;i<o.length;i++){var n=jQuery.trim(o[i]);if(n.substring(0,t.length+1)==t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var e=t("csrftoken");return e}$(document).ready(function(){function t(t,e,o){var i=document.createElement("input");i.type="hidden",i.name=e,i.value="visited_room_ids"==e&&0===o.length?0:o,t.appendChild(i)}function e(e){t(e,"move_count",o.move_count),t(e,"total_points",o.total_points),t(e,"visited_room_ids",JSON.stringify(o.visited_room_ids)),t(e,"from_title",o.from_title)}var o={};o.move_count=abstractCavingGameData_temp.move_count,o.total_points=abstractCavingGameData_temp.total_points,o.visited_room_ids=abstractCavingGameData_temp.visited_room_ids,o.from_title=abstractCavingGameData_temp.from_title,$(".pure-button").click(function(){theForm=$(this).parent()[0],"high_score_submit"!=$(this)[0].id&&(e(theForm),theForm.submit())}),$("#high_score_submit").click(function(){var t=csrfToken(),e=$("#high_score_name").val();$("#alert_window_main").html("<p>Your score is being submitted.</p>"),$.ajax({type:"POST",url:"/save-high-score/",beforeSend:function(e){e.setRequestHeader("X-CSRFToken",t)},data:{name:e,move_count:o.move_count,total_points:o.total_points},dataType:"html",success:function(t){$("#alert_window_main").html(t)}})})});