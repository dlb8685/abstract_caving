function csrfToken(){function e(e){var t=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=jQuery.trim(n[r]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}var t=e("csrftoken");return t}$(document).ready(function(){function t(e,t,n){var r=document.createElement("input");r.type="hidden";r.name=t;"name-as-seen-at-the-server";if(t=="visited_room_ids"&&n.length===0){r.value=0}else{r.value=n}e.appendChild(r)}function n(n){t(n,"move_count",e.move_count);t(n,"total_points",e.total_points);t(n,"visited_room_ids",JSON.stringify(e.visited_room_ids));t(n,"from_title",e.from_title)}var e={};e.move_count=abstractCavingGameData_temp.move_count;e.total_points=abstractCavingGameData_temp.total_points;e.visited_room_ids=abstractCavingGameData_temp.visited_room_ids;e.from_title=abstractCavingGameData_temp.from_title;$(".pure-button").click(function(){theForm=$(this).parent()[0];if($(this)[0].id!="high_score_submit"){n(theForm);theForm.submit()}});$("#high_score_submit").click(function(){var t=csrfToken();var n=$("#high_score_name").val();$.ajax({type:"POST",url:"/save-high-score/",beforeSend:function(e){e.setRequestHeader("X-CSRFToken",t)},data:{name:n,move_count:e.move_count,total_points:e.total_points},dataType:"html",success:function(e){$("#alert_window_main").html(e)}})})})